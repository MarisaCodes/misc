---
import Banner from "../components/Banner";
import Card from "../components/Card.astro";
import Carousel from "../components/carousel/Carousel";
import CarouselCell from "../components/carousel/CarouselCell.astro";
import Message from "../components/Message";
import Home from "../components/page-comps/Home";
import Layout from "../layouts/Layout.astro";

const haikus = await Astro.glob("../content/haiku/*.md");
const miscPosts = await Astro.glob("../content/misc/*.md");
const stories = await Astro.glob("../content/short-stories/*.md");
---

<Layout>
  <Banner client:load />
  <hr class="navbar-separator my-0" />
  <Home client:load>
    <Message client:load header="Check out haikus!">
      <Carousel client:load>
        {
          haikus.map((haiku) => {
            const { slug, href } = haiku.frontmatter;
            const { Content } = haiku;

            return (
              <CarouselCell>
                <Card slug={slug} href={href}>
                  <Content />
                </Card>
              </CarouselCell>
            );
          })
        }
      </Carousel>
    </Message>

    <Message client:load header="Checkout misc discussions">
      <Carousel client:load>
        {
          miscPosts.map((misc) => {
            const { slug, thumbnail, href } = misc.frontmatter;
            const { Content } = misc;

            return (
              <CarouselCell>
                <Card thumbnail={thumbnail} href={href} slug={slug}>
                  <Content />
                </Card>
              </CarouselCell>
            );
          })
        }
      </Carousel>
    </Message>

    <Message client:load header="Checkout short stories">
      <Carousel client:load>
        {
          stories.map(({ frontmatter, Content }) => {
            const { slug, href } = frontmatter;
            return (
              <CarouselCell>
                <Card href={href} slug={slug}>
                  <Content />
                </Card>
              </CarouselCell>
            );
          })
        }
      </Carousel>
    </Message>
  </Home>
</Layout>
